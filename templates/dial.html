<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dial Mode - Genetic Circuit Designer</title>
    <link href="https://cdn.replit.com/agent/bootstrap-agent-dark-theme.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="{{ url_for('static', filename='css/styles.css') }}" rel="stylesheet">
    <link href="{{ url_for('static', filename='css/dial.css') }}" rel="stylesheet">
    <!-- MathJax for equation rendering -->
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']]
            },
            svg: {
                fontCache: 'global'
            }
        };
    </script>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg">
        <div class="container-fluid">
            <a class="navbar-brand" href="{{ url_for('dial') }}">
                <i class="fas fa-dna me-2"></i>Genetic Circuit Designer
            </a>
            <div class="navbar-nav ms-auto">
                <a class="nav-link active" href="{{ url_for('dial') }}">Virtual Mode</a>
                <a class="nav-link" href="{{ url_for('eeprom') }}">Board Mode</a>
                <a class="nav-link" href="{{ url_for('about') }}">About</a>
            </div>
        </div>
    </nav>

    <div class="container">
        <!-- Header -->
        <center><h1  class="text-center mb-4">
            <h1>Virtual Mode</h1>
            <p class="lead">Fine-tune circuit parameters for advanced simulation</p>
        </h1></center>

        <!-- Dial Mode Layout -->
        <div class="dial-mode-container">
            <!-- Sidebar: Parameter Controls -->
            <div class="dial-sidebar">
                <h2><i class="fas fa-cogs me-2"></i>Circuit Parameters</h2>
                
                <form id="dial-form">
                    <!-- Global Parameters -->
                    <div class="dial-card">
                        <h3>Global Parameters</h3>
                        <div class="dial-grid">
                            <label for="global_transcription_rate">Transcription Rate:</label>
                            <input type="number" id="global_transcription_rate" name="global_transcription_rate" 
                                   min="0.1" max="3.0" step="0.1" value="1.0">
                                   
                            <label for="global_translation_rate">Translation Rate:</label>
                            <input type="number" id="global_translation_rate" name="global_translation_rate" 
                                   min="0.1" max="3.0" step="0.1" value="1.0">
                                   
                            <label for="global_degradation_rate">Degradation Rate:</label>
                            <input type="number" id="global_degradation_rate" name="global_degradation_rate" 
                                   min="0.1" max="3.0" step="0.1" value="1.0">
                                   
                            <label for="temperature_factor">Temperature:</label>
                            <input type="number" id="temperature_factor" name="temperature_factor" 
                                   min="0.5" max="2.0" step="0.1" value="1.0">
                                   
                            <label for="resource_availability">Resources:</label>
                            <input type="number" id="resource_availability" name="resource_availability" 
                                   min="0.1" max="2.0" step="0.1" value="1.0">
                        </div>
                    </div>

                    <!-- Gene 1 Parameters -->
                    <div class="dial-card">
                        <h3>Gene 1 Components</h3>
                        <div class="dial-grid">
                            <label for="promoter1_strength">Promoter Strength:</label>
                            <input type="number" id="promoter1_strength" name="promoter1_strength" 
                                   min="0.1" max="5.0" step="0.1" value="1.0">
                                   
                            <label for="rbs1_efficiency">RBS Efficiency:</label>
                            <input type="number" id="rbs1_efficiency" name="rbs1_efficiency" 
                                   min="0.1" max="2.0" step="0.1" value="1.0">
                                   
                            <label for="cds1_translation_rate">CDS Translation Rate:</label>
                            <input type="number" id="cds1_translation_rate" name="cds1_translation_rate" 
                                   min="1.0" max="20.0" step="0.5" value="5.0">
                                   
                            <label for="cds1_degradation_rate">CDS Degradation Rate:</label>
                            <input type="number" id="cds1_degradation_rate" name="cds1_degradation_rate" 
                                   min="0.01" max="1.0" step="0.01" value="0.1">
                                   
                            <label for="terminator1_efficiency">Terminator Eff:</label>
                            <input type="number" id="terminator1_efficiency" name="terminator1_efficiency" 
                                   min="0.1" max="1.0" step="0.01" value="0.99">
                                   
                            <label for="protein1_initial_conc">Initial Protein Conc:</label>
                            <input type="number" id="protein1_initial_conc" name="protein1_initial_conc" 
                                   min="0.0" max="2.0" step="0.05" value="1.0" title="Starting concentration (µM) - affects oscillation dynamics">
                        </div>
                    </div>

                    <!-- Gene 2 Parameters -->
                    <div class="dial-card">
                        <h3>Gene 2 Components</h3>
                        <div class="dial-grid">
                            <label for="promoter2_strength">Promoter Strength:</label>
                            <input type="number" id="promoter2_strength" name="promoter2_strength" 
                                   min="0.1" max="5.0" step="0.1" value="1.0">
                                   
                            <label for="rbs2_efficiency">RBS Efficiency:</label>
                            <input type="number" id="rbs2_efficiency" name="rbs2_efficiency" 
                                   min="0.1" max="2.0" step="0.1" value="1.0">
                                   
                            <label for="cds2_translation_rate">CDS Translation Rate:</label>
                            <input type="number" id="cds2_translation_rate" name="cds2_translation_rate" 
                                   min="1.0" max="20.0" step="0.5" value="5.0">
                                   
                            <label for="cds2_degradation_rate">CDS Degradation Rate:</label>
                            <input type="number" id="cds2_degradation_rate" name="cds2_degradation_rate" 
                                   min="0.01" max="1.0" step="0.01" value="0.1">
                                   
                            <label for="terminator2_efficiency">Terminator Eff:</label>
                            <input type="number" id="terminator2_efficiency" name="terminator2_efficiency" 
                                   min="0.1" max="1.0" step="0.01" value="0.99">
                                   
                            <label for="protein2_initial_conc">Initial Protein Conc:</label>
                            <input type="number" id="protein2_initial_conc" name="protein2_initial_conc" 
                                   min="0.0" max="2.0" step="0.05" value="0.1" title="Starting concentration (µM) - affects oscillation dynamics">
                        </div>
                    </div>

                    <!-- Gene 3 Parameters -->
                    <div class="dial-card">
                        <h3>Gene 3 Components</h3>
                        <div class="dial-grid">
                            <label for="promoter3_strength">Promoter Strength:</label>
                            <input type="number" id="promoter3_strength" name="promoter3_strength" 
                                   min="0.1" max="5.0" step="0.1" value="1.0">
                                   
                            <label for="rbs3_efficiency">RBS Efficiency:</label>
                            <input type="number" id="rbs3_efficiency" name="rbs3_efficiency" 
                                   min="0.1" max="2.0" step="0.1" value="1.0">
                                   
                            <label for="cds3_translation_rate">CDS Translation Rate:</label>
                            <input type="number" id="cds3_translation_rate" name="cds3_translation_rate" 
                                   min="1.0" max="20.0" step="0.5" value="5.0">
                                   
                            <label for="cds3_degradation_rate">CDS Degradation Rate:</label>
                            <input type="number" id="cds3_degradation_rate" name="cds3_degradation_rate" 
                                   min="0.01" max="1.0" step="0.01" value="0.1">
                                   
                            <label for="terminator3_efficiency">Terminator Eff:</label>
                            <input type="number" id="terminator3_efficiency" name="terminator3_efficiency" 
                                   min="0.1" max="1.0" step="0.01" value="0.99">
                                   
                            <label for="protein3_initial_conc">Initial Protein Conc:</label>
                            <input type="number" id="protein3_initial_conc" name="protein3_initial_conc" 
                                   min="0.0" max="2.0" step="0.05" value="0.05" title="Starting concentration (µM) - affects oscillation dynamics">
                        </div>
                    </div>

                    <!-- Regulatory Parameters -->
                    <div class="dial-card">
                        <h3>Regulatory Elements</h3>
                        <div class="dial-grid">
                            <label for="repressor_strength">Repressor Strength:</label>
                            <input type="number" id="repressor_strength" name="repressor_strength" 
                                   min="0.1" max="5.0" step="0.1" value="2.0">
                                   
                            <label for="activator_strength">Activator Strength:</label>
                            <input type="number" id="activator_strength" name="activator_strength" 
                                   min="0.1" max="5.0" step="0.1" value="3.0">
                                   
                            <label for="binding_affinity">Binding Affinity:</label>
                            <input type="number" id="binding_affinity" name="binding_affinity" 
                                   min="0.01" max="1.0" step="0.01" value="0.1">
                                   
                            <label for="cooperativity">Cooperativity:</label>
                            <input type="number" id="cooperativity" name="cooperativity" 
                                   min="0.5" max="3.0" step="0.1" value="2.0">
                        </div>
                    </div>
                </form>
            </div>

            <!-- Main Area -->
            <div class="dial-main">
                <!-- Component Palette -->
                <div class="component-palette">
                    <h2>Genetic Components</h2>
                    
                    <!-- Gene Tabs -->
                <div class="gene-tabs">
                    <button class="gene-tab active" data-gene="1">Gene 1</button>
                    <button class="gene-tab" data-gene="2">Gene 2</button>
                    <button class="gene-tab" data-gene="3">Gene 3</button>
                </div>

                <!-- Gene Components -->
                <div class="gene-components">
                    <!-- Gene 1 Panel -->
                    <div class="gene-panel active" data-gene="1">
                        <div class="component" data-component="Promoter" data-gene="1" draggable="true">
                            <div class="component-name">Promoter</div>
                            <div class="strength-menu">
                                <div class="strength-option" data-strength="weak">
                                    <div class="strength-indicator" style="background-color: #fca5a5;"></div>
                                    Weak
                                </div>
                                <div class="strength-option" data-strength="norm">
                                    <div class="strength-indicator" style="background-color: #fcd34d;"></div>
                                    Normal
                                </div>
                                <div class="strength-option" data-strength="strong">
                                    <div class="strength-indicator" style="background-color: #86efac;"></div>
                                    Strong
                                </div>
                            </div>
                        </div>
                        
                        <div class="component" data-component="RBS" data-gene="1" draggable="true">
                            <div class="component-name">RBS</div>
                            <div class="strength-menu">
                                <div class="strength-option" data-strength="weak">
                                    <div class="strength-indicator" style="background-color: #fca5a5;"></div>
                                    Weak
                                </div>
                                <div class="strength-option" data-strength="norm">
                                    <div class="strength-indicator" style="background-color: #fcd34d;"></div>
                                    Normal
                                </div>
                                <div class="strength-option" data-strength="strong">
                                    <div class="strength-indicator" style="background-color: #86efac;"></div>
                                    Strong
                                </div>
                            </div>
                        </div>
                        
                        <div class="component" data-component="CDS" data-gene="1" draggable="true">
                            <div class="component-name">CDS</div>
                            <div class="strength-menu">
                                <div class="strength-option" data-strength="weak">
                                    <div class="strength-indicator" style="background-color: #fca5a5;"></div>
                                    Weak
                                </div>
                                <div class="strength-option" data-strength="norm">
                                    <div class="strength-indicator" style="background-color: #fcd34d;"></div>
                                    Normal
                                </div>
                                <div class="strength-option" data-strength="strong">
                                    <div class="strength-indicator" style="background-color: #86efac;"></div>
                                    Strong
                                </div>
                            </div>
                        </div>
                        
                        <div class="component" data-component="Terminator" data-gene="1" draggable="true">
                            <div class="component-name">Terminator</div>
                            <div class="strength-menu">
                                <div class="strength-option" data-strength="weak">
                                    <div class="strength-indicator" style="background-color: #fca5a5;"></div>
                                    Weak
                                </div>
                                <div class="strength-option" data-strength="norm">
                                    <div class="strength-indicator" style="background-color: #fcd34d;"></div>
                                    Normal
                                </div>
                                <div class="strength-option" data-strength="strong">
                                    <div class="strength-indicator" style="background-color: #86efac;"></div>
                                    Strong
                                </div>
                            </div>
                        </div>
                        
                        <div class="component" data-component="Repressor Start" data-gene="1" draggable="true">
                            <div class="component-name">Repressor Start</div>
                            <div class="strength-menu">
                                <div class="strength-option" data-strength="weak">
                                    <div class="strength-indicator" style="background-color: #fca5a5;"></div>
                                    Weak
                                </div>
                                <div class="strength-option" data-strength="norm">
                                    <div class="strength-indicator" style="background-color: #fcd34d;"></div>
                                    Normal
                                </div>
                                <div class="strength-option" data-strength="strong">
                                    <div class="strength-indicator" style="background-color: #86efac;"></div>
                                    Strong
                                </div>
                            </div>
                        </div>
                        
                        <div class="component" data-component="Repressor End" data-gene="1" draggable="true">
                            <div class="component-name">Repressor End</div>
                            <div class="strength-menu">
                                <div class="strength-option" data-strength="weak">
                                    <div class="strength-indicator" style="background-color: #fca5a5;"></div>
                                    Weak
                                </div>
                                <div class="strength-option" data-strength="norm">
                                    <div class="strength-indicator" style="background-color: #fcd34d;"></div>
                                    Normal
                                </div>
                                <div class="strength-option" data-strength="strong">
                                    <div class="strength-indicator" style="background-color: #86efac;"></div>
                                    Strong
                                </div>
                            </div>
                        </div>
                        
                        <div class="component" data-component="Activator Start" data-gene="1" draggable="true">
                            <div class="component-name">Activator Start</div>
                            <div class="strength-menu">
                                <div class="strength-option" data-strength="weak">
                                    <div class="strength-indicator" style="background-color: #fca5a5;"></div>
                                    Weak
                                </div>
                                <div class="strength-option" data-strength="norm">
                                    <div class="strength-indicator" style="background-color: #fcd34d;"></div>
                                    Normal
                                </div>
                                <div class="strength-option" data-strength="strong">
                                    <div class="strength-indicator" style="background-color: #86efac;"></div>
                                    Strong
                                </div>
                            </div>
                        </div>
                        
                        <div class="component" data-component="Activator End" data-gene="1" draggable="true">
                            <div class="component-name">Activator End</div>
                            <div class="strength-menu">
                                <div class="strength-option" data-strength="weak">
                                    <div class="strength-indicator" style="background-color: #fca5a5;"></div>
                                    Weak
                                </div>
                                <div class="strength-option" data-strength="norm">
                                    <div class="strength-indicator" style="background-color: #fcd34d;"></div>
                                    Normal
                                </div>
                                <div class="strength-option" data-strength="strong">
                                    <div class="strength-indicator" style="background-color: #86efac;"></div>
                                    Strong
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Gene 2 Panel -->
                    <div class="gene-panel" data-gene="2">
                        <div class="component" data-component="Promoter" data-gene="2" draggable="true">
                            <div class="component-name">Promoter</div>
                            <div class="strength-menu">
                                <div class="strength-option" data-strength="weak">
                                    <div class="strength-indicator" style="background-color: #fca5a5;"></div>
                                    Weak
                                </div>
                                <div class="strength-option" data-strength="norm">
                                    <div class="strength-indicator" style="background-color: #fcd34d;"></div>
                                    Normal
                                </div>
                                <div class="strength-option" data-strength="strong">
                                    <div class="strength-indicator" style="background-color: #86efac;"></div>
                                    Strong
                                </div>
                            </div>
                        </div>
                        
                        <div class="component" data-component="RBS" data-gene="2" draggable="true">
                            <div class="component-name">RBS</div>
                            <div class="strength-menu">
                                <div class="strength-option" data-strength="weak">
                                    <div class="strength-indicator" style="background-color: #fca5a5;"></div>
                                    Weak
                                </div>
                                <div class="strength-option" data-strength="norm">
                                    <div class="strength-indicator" style="background-color: #fcd34d;"></div>
                                    Normal
                                </div>
                                <div class="strength-option" data-strength="strong">
                                    <div class="strength-indicator" style="background-color: #86efac;"></div>
                                    Strong
                                </div>
                            </div>
                        </div>
                        
                        <div class="component" data-component="CDS" data-gene="2" draggable="true">
                            <div class="component-name">CDS</div>
                            <div class="strength-menu">
                                <div class="strength-option" data-strength="weak">
                                    <div class="strength-indicator" style="background-color: #fca5a5;"></div>
                                    Weak
                                </div>
                                <div class="strength-option" data-strength="norm">
                                    <div class="strength-indicator" style="background-color: #fcd34d;"></div>
                                    Normal
                                </div>
                                <div class="strength-option" data-strength="strong">
                                    <div class="strength-indicator" style="background-color: #86efac;"></div>
                                    Strong
                                </div>
                            </div>
                        </div>
                        
                        <div class="component" data-component="Terminator" data-gene="2" draggable="true">
                            <div class="component-name">Terminator</div>
                            <div class="strength-menu">
                                <div class="strength-option" data-strength="weak">
                                    <div class="strength-indicator" style="background-color: #fca5a5;"></div>
                                    Weak
                                </div>
                                <div class="strength-option" data-strength="norm">
                                    <div class="strength-indicator" style="background-color: #fcd34d;"></div>
                                    Normal
                                </div>
                                <div class="strength-option" data-strength="strong">
                                    <div class="strength-indicator" style="background-color: #86efac;"></div>
                                    Strong
                                </div>
                            </div>
                        </div>
                        
                        <div class="component" data-component="Repressor Start" data-gene="2" draggable="true">
                            <div class="component-name">Repressor Start</div>
                            <div class="strength-menu">
                                <div class="strength-option" data-strength="weak">
                                    <div class="strength-indicator" style="background-color: #fca5a5;"></div>
                                    Weak
                                </div>
                                <div class="strength-option" data-strength="norm">
                                    <div class="strength-indicator" style="background-color: #fcd34d;"></div>
                                    Normal
                                </div>
                                <div class="strength-option" data-strength="strong">
                                    <div class="strength-indicator" style="background-color: #86efac;"></div>
                                    Strong
                                </div>
                            </div>
                        </div>
                        
                        <div class="component" data-component="Repressor End" data-gene="2" draggable="true">
                            <div class="component-name">Repressor End</div>
                            <div class="strength-menu">
                                <div class="strength-option" data-strength="weak">
                                    <div class="strength-indicator" style="background-color: #fca5a5;"></div>
                                    Weak
                                </div>
                                <div class="strength-option" data-strength="norm">
                                    <div class="strength-indicator" style="background-color: #fcd34d;"></div>
                                    Normal
                                </div>
                                <div class="strength-option" data-strength="strong">
                                    <div class="strength-indicator" style="background-color: #86efac;"></div>
                                    Strong
                                </div>
                            </div>
                        </div>
                        
                        <div class="component" data-component="Activator Start" data-gene="2" draggable="true">
                            <div class="component-name">Activator Start</div>
                            <div class="strength-menu">
                                <div class="strength-option" data-strength="weak">
                                    <div class="strength-indicator" style="background-color: #fca5a5;"></div>
                                    Weak
                                </div>
                                <div class="strength-option" data-strength="norm">
                                    <div class="strength-indicator" style="background-color: #fcd34d;"></div>
                                    Normal
                                </div>
                                <div class="strength-option" data-strength="strong">
                                    <div class="strength-indicator" style="background-color: #86efac;"></div>
                                    Strong
                                </div>
                            </div>
                        </div>
                        
                        <div class="component" data-component="Activator End" data-gene="2" draggable="true">
                            <div class="component-name">Activator End</div>
                            <div class="strength-menu">
                                <div class="strength-option" data-strength="weak">
                                    <div class="strength-indicator" style="background-color: #fca5a5;"></div>
                                    Weak
                                </div>
                                <div class="strength-option" data-strength="norm">
                                    <div class="strength-indicator" style="background-color: #fcd34d;"></div>
                                    Normal
                                </div>
                                <div class="strength-option" data-strength="strong">
                                    <div class="strength-indicator" style="background-color: #86efac;"></div>
                                    Strong
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Gene 3 Panel -->
                    <div class="gene-panel" data-gene="3">
                        <div class="component" data-component="Promoter" data-gene="3" draggable="true">
                            <div class="component-name">Promoter</div>
                            <div class="strength-menu">
                                <div class="strength-option" data-strength="weak">
                                    <div class="strength-indicator" style="background-color: #fca5a5;"></div>
                                    Weak
                                </div>
                                <div class="strength-option" data-strength="norm">
                                    <div class="strength-indicator" style="background-color: #fcd34d;"></div>
                                    Normal
                                </div>
                                <div class="strength-option" data-strength="strong">
                                    <div class="strength-indicator" style="background-color: #86efac;"></div>
                                    Strong
                                </div>
                            </div>
                        </div>
                        
                        <div class="component" data-component="RBS" data-gene="3" draggable="true">
                            <div class="component-name">RBS</div>
                            <div class="strength-menu">
                                <div class="strength-option" data-strength="weak">
                                    <div class="strength-indicator" style="background-color: #fca5a5;"></div>
                                    Weak
                                </div>
                                <div class="strength-option" data-strength="norm">
                                    <div class="strength-indicator" style="background-color: #fcd34d;"></div>
                                    Normal
                                </div>
                                <div class="strength-option" data-strength="strong">
                                    <div class="strength-indicator" style="background-color: #86efac;"></div>
                                    Strong
                                </div>
                            </div>
                        </div>
                        
                        <div class="component" data-component="CDS" data-gene="3" draggable="true">
                            <div class="component-name">CDS</div>
                            <div class="strength-menu">
                                <div class="strength-option" data-strength="weak">
                                    <div class="strength-indicator" style="background-color: #fca5a5;"></div>
                                    Weak
                                </div>
                                <div class="strength-option" data-strength="norm">
                                    <div class="strength-indicator" style="background-color: #fcd34d;"></div>
                                    Normal
                                </div>
                                <div class="strength-option" data-strength="strong">
                                    <div class="strength-indicator" style="background-color: #86efac;"></div>
                                    Strong
                                </div>
                            </div>
                        </div>
                        
                        <div class="component" data-component="Terminator" data-gene="3" draggable="true">
                            <div class="component-name">Terminator</div>
                            <div class="strength-menu">
                                <div class="strength-option" data-strength="weak">
                                    <div class="strength-indicator" style="background-color: #fca5a5;"></div>
                                    Weak
                                </div>
                                <div class="strength-option" data-strength="norm">
                                    <div class="strength-indicator" style="background-color: #fcd34d;"></div>
                                    Normal
                                </div>
                                <div class="strength-option" data-strength="strong">
                                    <div class="strength-indicator" style="background-color: #86efac;"></div>
                                    Strong
                                </div>
                            </div>
                        </div>
                        
                        <div class="component" data-component="Repressor Start" data-gene="3" draggable="true">
                            <div class="component-name">Repressor Start</div>
                            <div class="strength-menu">
                                <div class="strength-option" data-strength="weak">
                                    <div class="strength-indicator" style="background-color: #fca5a5;"></div>
                                    Weak
                                </div>
                                <div class="strength-option" data-strength="norm">
                                    <div class="strength-indicator" style="background-color: #fcd34d;"></div>
                                    Normal
                                </div>
                                <div class="strength-option" data-strength="strong">
                                    <div class="strength-indicator" style="background-color: #86efac;"></div>
                                    Strong
                                </div>
                            </div>
                        </div>
                        
                        <div class="component" data-component="Repressor End" data-gene="3" draggable="true">
                            <div class="component-name">Repressor End</div>
                            <div class="strength-menu">
                                <div class="strength-option" data-strength="weak">
                                    <div class="strength-indicator" style="background-color: #fca5a5;"></div>
                                    Weak
                                </div>
                                <div class="strength-option" data-strength="norm">
                                    <div class="strength-indicator" style="background-color: #fcd34d;"></div>
                                    Normal
                                </div>
                                <div class="strength-option" data-strength="strong">
                                    <div class="strength-indicator" style="background-color: #86efac;"></div>
                                    Strong
                                </div>
                            </div>
                        </div>
                        
                        <div class="component" data-component="Activator Start" data-gene="3" draggable="true">
                            <div class="component-name">Activator Start</div>
                            <div class="strength-menu">
                                <div class="strength-option" data-strength="weak">
                                    <div class="strength-indicator" style="background-color: #fca5a5;"></div>
                                    Weak
                                </div>
                                <div class="strength-option" data-strength="norm">
                                    <div class="strength-indicator" style="background-color: #fcd34d;"></div>
                                    Normal
                                </div>
                                <div class="strength-option" data-strength="strong">
                                    <div class="strength-indicator" style="background-color: #86efac;"></div>
                                    Strong
                                </div>
                            </div>
                        </div>
                        
                        <div class="component" data-component="Activator End" data-gene="3" draggable="true">
                            <div class="component-name">Activator End</div>
                            <div class="strength-menu">
                                <div class="strength-option" data-strength="weak">
                                    <div class="strength-indicator" style="background-color: #fca5a5;"></div>
                                    Weak
                                </div>
                                <div class="strength-option" data-strength="norm">
                                    <div class="strength-indicator" style="background-color: #fcd34d;"></div>
                                    Normal
                                </div>
                                <div class="strength-option" data-strength="strong">
                                    <div class="strength-indicator" style="background-color: #86efac;"></div>
                                    Strong
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

                <!-- Design Board -->
                <div class="cell-board">
                    <h2><i class="fas fa-th-large me-2"></i>Design Board</h2>
                    <div class="grid-container">
                        <img src="static/css/attached_assests/weas.png" alt="Lab_Logo-C11" class="lab-logo">
                        <div class="cell-board-header">
                        <h1 class="cell-board-title">
                        <span class="letter-c">C</span>
                        <span class="letter-e1">e</span>
                        <span class="letter-l2">l</span>
                        <span class="letter-l3">l</span>
                        <span class="letter-space"> </span>
                        <span class="letter-b">B</span>
                        <span class="letter-o">o</span>
                        <span class="letter-a">a</span>
                        <span class="letter-r">r</span>
                        <span class="letter-d">d</span>
                        </h1>
                        <p class="lab-subtitle">By the Lopatkin Lab</p>
                </div>
                       <!-- Generate 8x8 grid -->
                        <div class="grid-row">
                            <div class="cell functional" data-x="0" data-y="0"></div>
                            <div class="cell functional" data-x="1" data-y="0"></div>
                            <div class="cell functional" data-x="2" data-y="0"></div>
                            <div class="cell functional" data-x="3" data-y="0"></div>
                            <div class="cell functional" data-x="4" data-y="0"></div>
                            <div class="cell functional" data-x="5" data-y="0"></div>
                            <div class="cell functional" data-x="6" data-y="0"></div>
                            <div class="cell functional" data-x="7" data-y="0"></div>
                            <div class="cell functional" data-x="8" data-y="0"></div>
                            <div class="cell functional" data-x="9" data-y="0"></div>
                        </div>
                        <div class="grid-row">
                            <div class="cell functional" data-x="0" data-y="1"></div>
                            <div class="cell functional" data-x="1" data-y="1"></div>
                            <div class="cell functional" data-x="2" data-y="1"></div>
                            <div class="cell functional" data-x="3" data-y="1"></div>
                            <div class="cell functional" data-x="4" data-y="1"></div>
                            <div class="cell functional" data-x="5" data-y="1"></div>
                            <div class="cell functional" data-x="6" data-y="1"></div>
                            <div class="cell functional" data-x="7" data-y="1"></div>
                            <div class="cell functional" data-x="8" data-y="1"></div>
                            <div class="cell functional" data-x="9" data-y="1"></div>
                        </div>
                        <div class="grid-row">
                            <div class="cell functional" data-x="0" data-y="2"></div>
                            <div class="cell functional" data-x="1" data-y="2"></div>
                            <div class="cell functional" data-x="2" data-y="2"></div>
                            <div class="cell functional" data-x="3" data-y="2"></div>
                            <div class="cell functional" data-x="4" data-y="2"></div>
                            <div class="cell functional" data-x="5" data-y="2"></div>
                            <div class="cell functional" data-x="6" data-y="2"></div>
                            <div class="cell functional" data-x="7" data-y="2"></div>
                            <div class="cell functional" data-x="8" data-y="2"></div>
                            <div class="cell functional" data-x="9" data-y="2"></div>
                        </div>
                        <div class="grid-row">
                            <div class="cell functional" data-x="0" data-y="3"></div>
                            <div class="cell functional" data-x="1" data-y="3"></div>
                            <div class="cell functional" data-x="2" data-y="3"></div>
                            <div class="cell functional" data-x="3" data-y="3"></div>
                            <div class="cell functional" data-x="4" data-y="3"></div>
                            <div class="cell functional" data-x="5" data-y="3"></div>
                            <div class="cell functional" data-x="6" data-y="3"></div>
                            <div class="cell functional" data-x="7" data-y="3"></div>
                            <div class="cell functional" data-x="8" data-y="3"></div>
                            <div class="cell functional" data-x="9" data-y="3"></div>
                        </div>
                        <div class="grid-row">
                            <div class="cell functional" data-x="0" data-y="4"></div>
                            <div class="cell functional" data-x="1" data-y="4"></div>
                            <div class="cell functional" data-x="2" data-y="4"></div>
                            <div class="cell functional" data-x="3" data-y="4"></div>
                            <div class="cell functional" data-x="4" data-y="4"></div>
                            <div class="cell functional" data-x="5" data-y="4"></div>
                            <div class="cell functional" data-x="6" data-y="4"></div>
                            <div class="cell functional" data-x="7" data-y="4"></div>
                            <div class="cell functional" data-x="8" data-y="4"></div>
                            <div class="cell functional" data-x="9" data-y="4"></div>
                        </div>
                        <div class="grid-row">
                            <div class="cell functional" data-x="0" data-y="5"></div>
                            <div class="cell functional" data-x="1" data-y="5"></div>
                            <div class="cell functional" data-x="2" data-y="5"></div>
                            <div class="cell functional" data-x="3" data-y="5"></div>
                            <div class="cell functional" data-x="4" data-y="5"></div>
                            <div class="cell functional" data-x="5" data-y="5"></div>
                            <div class="cell functional" data-x="6" data-y="5"></div>
                            <div class="cell functional" data-x="7" data-y="5"></div>
                            <div class="cell functional" data-x="8" data-y="5"></div>
                            <div class="cell functional" data-x="9" data-y="5"></div>
                        </div>
                        <div class="grid-row">
                            <div class="cell functional" data-x="0" data-y="6"></div>
                            <div class="cell functional" data-x="1" data-y="6"></div>
                            <div class="cell functional" data-x="2" data-y="6"></div>
                            <div class="cell functional" data-x="3" data-y="6"></div>
                            <div class="cell functional" data-x="4" data-y="6"></div>
                            <div class="cell functional" data-x="5" data-y="6"></div>
                            <div class="cell functional" data-x="6" data-y="6"></div>
                            <div class="cell functional" data-x="7" data-y="6"></div>
                            <div class="cell functional" data-x="8" data-y="6"></div>
                            <div class="cell functional" data-x="9" data-y="6"></div>
                        </div>
                        <div class="grid-row">
                            <div class="cell functional" data-x="0" data-y="7"></div>
                            <div class="cell functional" data-x="1" data-y="7"></div>
                            <div class="cell functional" data-x="2" data-y="7"></div>
                            <div class="cell functional" data-x="3" data-y="7"></div>
                            <div class="cell functional" data-x="4" data-y="7"></div>
                            <div class="cell functional" data-x="5" data-y="7"></div>
                            <div class="cell functional" data-x="6" data-y="7"></div>
                            <div class="cell functional" data-x="7" data-y="7"></div>
                            <div class="cell functional" data-x="8" data-y="7"></div>
                            <div class="cell functional" data-x="9" data-y="7"></div>
                        </div>
                         <div class="grid-row">
                            <div class="cell functional" data-x="0" data-y="8"></div>
                            <div class="cell functional" data-x="1" data-y="8"></div>
                            <div class="cell functional" data-x="2" data-y="8"></div>
                            <div class="cell functional" data-x="3" data-y="8"></div>
                            <div class="cell functional" data-x="4" data-y="8"></div>
                            <div class="cell functional" data-x="5" data-y="8"></div>
                            <div class="cell functional" data-x="6" data-y="8"></div>
                            <div class="cell functional" data-x="7" data-y="8"></div>
                            <div class="cell functional" data-x="8" data-y="8"></div>
                            <div class="cell functional" data-x="9" data-y="8"></div>
                        </div>
                         <div class="grid-row">
                            <div class="cell functional" data-x="0" data-y="9"></div>
                            <div class="cell functional" data-x="1" data-y="9"></div>
                            <div class="cell functional" data-x="2" data-y="9"></div>
                            <div class="cell functional" data-x="3" data-y="9"></div>
                            <div class="cell functional" data-x="4" data-y="9"></div>
                            <div class="cell functional" data-x="5" data-y="9"></div>
                            <div class="cell functional" data-x="6" data-y="9"></div>
                            <div class="cell functional" data-x="7" data-y="9"></div>
                            <div class="cell functional" data-x="8" data-y="9"></div>
                            <div class="cell functional" data-x="9" data-y="9"></div>
                        </div>
                    </div>
                    <script>
  (function lockBorderCells(){
    const cells = document.querySelectorAll('.grid-container .cell');
    cells.forEach(cell => {
      const x = Number(cell.dataset.x);
      const y = Number(cell.dataset.y);
      // outer frame (0 or 9) is locked; inner (1..8) stays functional
      if (x === 0 || x === 9 || y === 0 || y === 9) {
        cell.classList.remove('functional');
        cell.classList.add('locked');
        cell.setAttribute('aria-disabled', 'true');
        cell.title = 'Border cell (locked)';
      } else {
        cell.classList.add('functional'); // ensure inner cells are active
      }
    });
  })();
</script>
                    <!-- Controls -->
                    <div class="controls">
                        <button id="simulate-btn" class="btn btn-primary">
                            <i class="fas fa-play me-2"></i>Run Enhanced Simulation
                        </button>
                        <button id="clear-btn" class="btn btn-secondary">
                            <i class="fas fa-trash me-2"></i>Clear Board
                        </button>
                        <button class="btn btn-secondary" onclick="resetParameters()">
                            <i class="fas fa-undo me-2"></i>Reset Parameters
                        </button>
                    </div>
                </div>

                <!-- Results -->
                <div class="results">
                    <h2><i class="fas fa-chart-line me-2"></i>Enhanced Simulation Results</h2>
                    <div class="error-message" id="error-display"></div>
                    <div class="plot-area" id="plot-container">
                        <div class="loading">
                            <i class="fas fa-dna" style="color: var(--primary); font-size: 2rem;"></i>
                            <p>Design your circuit and run enhanced simulation</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Ontology Analysis Section -->
                <div class="ontology-analysis" id="ontology-analysis" style="display: none;">
                    <h2><i class="fas fa-project-diagram me-2"></i>Circuit Analysis</h2>
                    
                    <!-- Circuit Status Overview -->
                    <div class="row mb-4">
                        <div class="col-12">
                            <div class="analysis-card">
                                <h3><i class="fas fa-info-circle me-2"></i>Circuit Status Overview</h3>
                                <div class="status-grid" id="status-overview">
                                    <div class="status-item">
                                        <div class="status-icon valid">
                                            <i class="fas fa-check-circle"></i>
                                        </div>
                                        <div class="status-content">
                                            <div class="status-number" id="valid-circuits">0</div>
                                            <div class="status-label">Valid Circuits</div>
                                        </div>
                                    </div>
                                    <div class="status-item">
                                        <div class="status-icon warning">
                                            <i class="fas fa-exclamation-triangle"></i>
                                        </div>
                                        <div class="status-content">
                                            <div class="status-number" id="incomplete-circuits">0</div>
                                            <div class="status-label">Incomplete Circuits</div>
                                        </div>
                                    </div>
                                    <div class="status-item">
                                        <div class="status-icon error">
                                            <i class="fas fa-times-circle"></i>
                                        </div>
                                        <div class="status-content">
                                            <div class="status-number" id="extra-components">0</div>
                                            <div class="status-label">Extra Components</div>
                                        </div>
                                    </div>
                                    <div class="status-item">
                                        <div class="status-icon regulatory">
                                            <i class="fas fa-network-wired"></i>
                                        </div>
                                        <div class="status-content">
                                            <div class="status-number" id="regulatory-links">0</div>
                                            <div class="status-label">Regulatory Links</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Detailed Circuit Analysis -->
                    <div class="row">
                        <!-- Valid Circuits -->
                        <div class="col-md-6 mb-3">
                            <div class="analysis-card">
                                <h4><i class="fas fa-check-circle text-success me-2"></i>Modelable Circuits</h4>
                                <div class="circuit-list" id="valid-circuits-list">
                                    <div class="empty-state">
                                        <i class="fas fa-dna text-muted"></i>
                                        <p>No valid circuits detected yet</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Incomplete Circuits -->
                        <div class="col-md-6 mb-3">
                            <div class="analysis-card">
                                <h4><i class="fas fa-exclamation-triangle text-warning me-2"></i>Incomplete Circuits</h4>
                                <div class="circuit-list" id="incomplete-circuits-list">
                                    <div class="empty-state">
                                        <i class="fas fa-exclamation-triangle text-muted"></i>
                                        <p>No incomplete circuits found</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Regulatory Networks -->
                        <div class="col-md-6 mb-3">
                            <div class="analysis-card">
                                <h4><i class="fas fa-network-wired text-info me-2"></i>Regulatory Networks</h4>
                                <div class="regulation-list" id="regulations-list">
                                    <div class="empty-state">
                                        <i class="fas fa-project-diagram text-muted"></i>
                                        <p>No regulatory networks found</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Equation Display -->
                        <div class="col-12 mb-3">
                            <div class="analysis-card">
                                <h4><i class="fas fa-calculator text-warning me-2"></i>Protein Expression Equations</h4>
                                <div class="equation-display" id="equation-display-list">
                                    <div class="empty-state">
                                        <i class="fas fa-dna text-muted"></i>
                                        <p>No protein equations generated yet</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Unpaired Regulators -->
                        <div class="col-md-6 mb-3">
                            <div class="analysis-card">
                                <h4><i class="fas fa-unlink text-danger me-2"></i>Unpaired Regulators</h4>
                                <div class="regulator-list" id="unpaired-regulators-list">
                                    <div class="empty-state">
                                        <i class="fas fa-link text-muted"></i>
                                        <p>All regulators are properly paired</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Circuit Issues -->
                        <div class="col-md-6 mb-3">
                            <div class="analysis-card">
                                <h4><i class="fas fa-exclamation-triangle text-warning me-2"></i>Circuit Issues</h4>
                                <div class="issues-list" id="circuit-issues">
                                    <div class="empty-state">
                                        <i class="fas fa-shield-alt text-muted"></i>
                                        <p>No issues detected</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Extra Components -->
                        <div class="col-md-6 mb-3">
                            <div class="analysis-card">
                                <h4><i class="fas fa-puzzle-piece text-danger me-2"></i>Unassigned Components</h4>
                                <div class="extras-list" id="extra-components-list">
                                    <div class="empty-state">
                                        <i class="fas fa-puzzle-piece text-muted"></i>
                                        <p>All components are properly assigned</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Component Analysis -->
                    <div class="row">
                        <div class="col-12">
                            <div class="analysis-card">
                                <h4><i class="fas fa-microscope me-2"></i>Component Analysis</h4>
                                <div class="component-analysis" id="component-analysis">
                                    <div class="empty-state">
                                        <i class="fas fa-cube text-muted"></i>
                                        <p>Place components to see detailed analysis</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{{ url_for('static', filename='js/script.js') }}"></script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
    <script>
        function resetParameters() {
            // Reset all parameter inputs to default values
            document.getElementById('global_transcription_rate').value = '1.0';
            document.getElementById('global_translation_rate').value = '1.0';
            document.getElementById('global_degradation_rate').value = '1.0';
            document.getElementById('temperature_factor').value = '1.0';
            document.getElementById('resource_availability').value = '1.0';
            
            // Reset gene-specific parameters
            document.getElementById('promoter1_strength').value = '1.0';
            document.getElementById('promoter2_strength').value = '2.0';
            document.getElementById('promoter3_strength').value = '0.5';
            
            // Reset other parameters to defaults
            const inputs = document.querySelectorAll('#dial-form input[type="number"]');
            inputs.forEach(input => {
                const defaultValues = {
                    'rbs1_efficiency': '1.0',
                    'rbs2_efficiency': '1.5',
                    'rbs3_efficiency': '0.7',
                    'cds1_translation_rate': '5.0',
                    'cds2_translation_rate': '7.0',
                    'cds3_translation_rate': '3.0',
                    'cds1_degradation_rate': '0.1',
                    'cds2_degradation_rate': '0.15',
                    'cds3_degradation_rate': '0.08',
                    'terminator1_efficiency': '0.99',
                    'terminator2_efficiency': '0.95',
                    'terminator3_efficiency': '0.98',
                    'repressor_strength': '2.0',
                    'activator_strength': '3.0',
                    'binding_affinity': '0.1',
                    'cooperativity': '2.0'
                };
                
                if (defaultValues[input.id]) {
                    input.value = defaultValues[input.id];
                }
            });
        }
    </script>
</body>
</html>
